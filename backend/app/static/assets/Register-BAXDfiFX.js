import{r as t,u as S,j as e}from"./index-B6wzmrGU.js";function v({currentStep:s,totalSteps:l}){const c=s/l*100;return e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:`${c}%`}})})}function N(){return e.jsx("div",{className:"text-center mt-6",children:e.jsxs("a",{href:"#",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",onClick:s=>{s.preventDefault(),alert("Support chat would open here. Contact: support@capecontrol.com")},children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Need Help?"]})})}function k({onNext:s,formData:l,setFormData:c}){const[r,u]=t.useState(l.email||""),[n,x]=t.useState(l.password||""),[o,d]=t.useState(""),[m,p]=t.useState(l.firstName||""),[b,f]=t.useState(l.lastName||""),[h,g]=t.useState(""),j=async a=>{if(a.preventDefault(),g(""),n!==o){g("Passwords do not match");return}if(n.length<8){g("Password must be at least 8 characters long");return}c({...l,email:r,password:n,firstName:m,lastName:b}),s()};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-8 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600",children:"Step 1: Basic Information"}),e.jsx(v,{currentStep:1,totalSteps:3})]}),h&&e.jsx("p",{className:"text-red-600 text-sm mb-4 text-center bg-red-50 p-3 rounded",children:h}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",autoComplete:"username",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:m,onChange:a=>p(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",autoComplete:"username",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:b,onChange:a=>f(a.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",autoComplete:"username",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:r,onChange:a=>u(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",autoComplete:"new-password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:a=>x(a.target.value),required:!0,minLength:8})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",autoComplete:"new-password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:o,onChange:a=>d(a.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Continue"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-blue-600 hover:underline",children:"Sign in"})]}),e.jsx(N,{})]})}function A({onNext:s,formData:l,setFormData:c}){const[r,u]=t.useState(l.role||""),n=o=>{u(o),c({...l,role:o})},x=()=>{r&&s()};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-20 p-8 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Choose Your Role"}),e.jsx("p",{className:"text-gray-600",children:"Step 2: Select how you'll use CapeControl"}),e.jsx(v,{currentStep:2,totalSteps:3})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsx("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-all ${r==="user"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>n("user"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"User"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"I want to use AI agents to automate tasks and boost productivity for my business."}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 mt-4 space-y-1",children:[e.jsx("li",{children:"• Access pre-built AI agents"}),e.jsx("li",{children:"• Automate business processes"}),e.jsx("li",{children:"• No coding required"}),e.jsx("li",{children:"• Easy-to-use dashboard"})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-all ${r==="developer"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>n("developer"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"})})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Developer"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"I want to create and sell AI agents on the CapeControl marketplace."}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 mt-4 space-y-1",children:[e.jsx("li",{children:"• Build custom AI agents"}),e.jsx("li",{children:"• Sell on the marketplace"}),e.jsx("li",{children:"• Access developer tools"}),e.jsx("li",{children:"• Revenue sharing program"})]})]})})]}),e.jsx("button",{onClick:x,disabled:!r,className:`w-full p-3 rounded-lg font-semibold transition-colors ${r?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Continue to Details"}),e.jsx(N,{})]})}function E({formData:s,setFormData:l,onSubmit:c}){const[r,u]=t.useState(s.company||""),[n,x]=t.useState(s.phone||""),[o,d]=t.useState(s.website||""),[m,p]=t.useState(s.experience||""),[b,f]=t.useState(!1),[h,g]=t.useState(!1),[j,a]=t.useState(""),y=async i=>{if(i.preventDefault(),!b){a("You must agree to the Terms & Conditions");return}g(!0),a("");const w={...s,company:r,phone:n,website:o,experience:m};try{await c(w)}catch(C){a(C.message)}finally{g(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-8 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Registration"}),e.jsxs("p",{className:"text-gray-600",children:["Step 3: ",s.role==="user"?"Business":"Developer"," Details"]}),e.jsx(v,{currentStep:3,totalSteps:3})]}),j&&e.jsx("p",{className:"text-red-600 text-sm mb-4 text-center bg-red-50 p-3 rounded",children:j}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.role==="user"?"Company Name":"Developer/Company Name"}),e.jsx("input",{type:"text",autoComplete:"username",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:r,onChange:i=>u(i.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:i=>x(i.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website (Optional)"}),e.jsx("input",{type:"url",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:o,onChange:i=>d(i.target.value),placeholder:"https://"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.role==="user"?"Business Experience":"Development Experience"}),e.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:m,onChange:i=>p(i.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select experience level"}),e.jsx("option",{value:"beginner",children:"Beginner (0-1 years)"}),e.jsx("option",{value:"intermediate",children:"Intermediate (2-5 years)"}),e.jsx("option",{value:"advanced",children:"Advanced (5+ years)"}),e.jsx("option",{value:"expert",children:"Expert (10+ years)"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"terms",className:"mt-1",checked:b,onChange:i=>f(i.target.checked)}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["I agree to the"," ",e.jsx("a",{href:"/terms",className:"text-blue-600 hover:underline",target:"_blank",children:"Terms & Conditions"})," ","for ",s.role==="user"?"Users":"Developers"]})]}),e.jsx("button",{type:"submit",disabled:h,className:`w-full p-3 rounded-lg font-semibold transition-colors ${h?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:h?"Creating Account...":"Create Account"})]}),e.jsx(N,{})]})}function P(){const[s,l]=t.useState(1),[c,r]=t.useState({}),u=S(),n=()=>{l(s+1)},x=async o=>{try{const d=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!d.ok){const p=await d.json();throw new Error(p.detail||"Registration failed")}const m=await d.json();o.role==="user"?u("/phase2-customer",{state:{userData:{...o,...m}}}):u("/phase2-developer",{state:{userData:{...o,...m}}})}catch(d){throw d}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[s===1&&e.jsx(k,{onNext:n,formData:c,setFormData:r}),s===2&&e.jsx(A,{onNext:n,formData:c,setFormData:r}),s===3&&e.jsx(E,{formData:c,setFormData:r,onSubmit:x})]})}export{P as default};

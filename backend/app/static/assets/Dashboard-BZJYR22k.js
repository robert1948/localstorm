import{r as d,C as W,j as e,a as E,u as V}from"./index-B1s3ZP1Z.js";import{a as Y}from"./index-Dq7h7Pqt.js";function v(){const s=d.useContext(W);return s||(console.warn("useCapeAI: Context not available, returning safe defaults"),{isVisible:!1,messages:[],onboardingStep:0,onboardingData:{profileComplete:!1,featuresViewed:!1,aiIntroduced:!1,dashboardTour:!1,firstAgentLaunched:!1},toggleVisibility:()=>{},addMessage:()=>{},setOnboardingStep:()=>{},updateOnboardingData:()=>{},isInitialized:!1})}function P(){const{onboardingData:s,addMessage:x,toggleVisibility:f}=v(),l=[{id:"profile",label:"✅ Set up your profile",done:s.profileComplete||!1,helpText:"Complete your business profile to get personalized AI recommendations"},{id:"features",label:"📄 Review the platform features",done:s.featuresViewed||!1,helpText:"Learn about our AI agents and how they can help your business"},{id:"assistant",label:"🤖 Meet your AI assistant",done:s.aiIntroduced||!1,helpText:"Chat with CapeAI to get personalized guidance and support"},{id:"dashboard",label:"📈 View your dashboard",done:s.dashboardTour||!1,helpText:"Explore your control center for managing AI agents and analytics"},{id:"agent",label:"🚀 Launch your first agent",done:s.firstAgentLaunched||!1,helpText:"Try out an AI agent to see the platform in action"}],g=a=>{x("assistant",{profile:"Let me help you set up your profile! What type of business are you running?",features:"I'd love to show you our platform features! Which area interests you most: automation, content creation, or data analysis?",assistant:"Hi there! I'm CapeAI, and I'm here to help you succeed on our platform. What questions do you have?",dashboard:"Your dashboard is powerful! Let me give you a quick tour of the key features.",agent:"Ready to launch your first AI agent? I can recommend the best one based on your needs!"}[a.id]),f()},h=l.filter(a=>a.done).length,u=h/l.length*100;return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Getting Started Checklist"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[h,"/",l.length," completed"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})}),e.jsx("ul",{className:"space-y-3",children:l.map((a,o)=>e.jsxs("li",{className:`flex items-start gap-3 p-3 rounded-lg border transition-colors cursor-pointer hover:bg-gray-50 ${a.done?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,onClick:()=>g(a),children:[e.jsx("span",{className:"text-xl mt-0.5",children:a.done?"✅":"⬜"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${a.done?"text-green-700":"text-gray-800"}`,children:a.label}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:a.helpText})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Get Help"})]},o))}),u===100&&e.jsxs("div",{className:"mt-4 p-4 bg-green-100 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx("span",{className:"text-xl",children:"🎉"}),e.jsx("span",{className:"font-semibold",children:"Congratulations!"})]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"You've completed the onboarding process. You're ready to explore the full power of CapeControl!"})]})]})}const i={welcome:{id:"welcome",title:"Welcome to CapeControl!",description:"Let me help you get started with our AI-powered platform",triggers:["/"],nextStep:"profile",autoTrigger:!0},profile:{id:"profile",title:"Complete Your Profile",description:"Set up your business profile to get personalized recommendations",triggers:["/profile","/"],nextStep:"features",completionCheck:s=>s.profileComplete},features:{id:"features",title:"Explore Platform Features",description:"Learn about our AI agents and capabilities",triggers:["/features","/dashboard"],nextStep:"assistant",completionCheck:s=>s.featuresViewed},assistant:{id:"assistant",title:"Meet Your AI Assistant",description:"Get to know CapeAI and how it can help you",triggers:["*"],nextStep:"dashboard",completionCheck:s=>s.aiIntroduced},dashboard:{id:"dashboard",title:"Explore Your Dashboard",description:"Tour your control center for managing AI agents",triggers:["/dashboard"],nextStep:"agent",completionCheck:s=>s.dashboardTour},agent:{id:"agent",title:"Launch Your First Agent",description:"Try out an AI agent to see the platform in action",triggers:["/agents","/dashboard"],nextStep:"complete",completionCheck:s=>s.firstAgentLaunched},complete:{id:"complete",title:"Onboarding Complete!",description:"You're ready to explore the full power of CapeControl",triggers:[],nextStep:null,completionCheck:()=>!0}};function H(){const s=E(),x=V();let f;try{f=v()}catch(t){return console.warn("CapeAI context not available in useOnboarding:",t),{currentStep:"welcome",showContextualHelp:!1,isComplete:!1,getCurrentStepConfig:()=>i.welcome,nextStep:()=>{},previousStep:()=>{},completeStep:()=>{},completeCurrentStep:()=>{},goToStep:()=>{},showStepDialog:!1,setShowStepDialog:()=>{},isStepCompleted:()=>!1,getProgress:()=>({completed:0,total:6,percentage:0}),showContextualMessage:()=>{}}}const{onboardingData:l,updateOnboardingData:g,onboardingStep:h,addMessage:u,toggleVisibility:a}=f,[o,c]=d.useState(h||"welcome"),[A,I]=d.useState(!1),[w,j]=d.useState([]),C=()=>i[o],b=t=>{const n=i[t];return n.completionCheck?n.completionCheck(l):!1},N=()=>{const t=Object.keys(i).length-1,n=Object.keys(i).filter(r=>r!=="complete"&&b(r)).length;return{completed:n,total:t,percentage:Math.round(n/t*100)}},k=(t,n={})=>{const r={...l,...n},p={profile:{profileComplete:!0},features:{featuresViewed:!0},assistant:{aiIntroduced:!0},dashboard:{dashboardTour:!0},agent:{firstAgentLaunched:!0}};p[t]&&Object.assign(r,p[t]),g(r);const m=i[t];m!=null&&m.nextStep&&m.nextStep!=="complete"?c(m.nextStep):(m==null?void 0:m.nextStep)==="complete"&&(c("complete"),u("assistant","🎉 Congratulations! You've completed the onboarding process. You're now ready to explore the full power of CapeControl!"))},S=t=>{const r=Object.values(i).filter(p=>p.triggers.includes(t)||p.triggers.includes("*")).find(p=>!b(p.id)&&p.id!=="complete");r&&r.id!==o&&(c(r.id),r.autoTrigger&&setTimeout(()=>{y(r.id)},1e3))},y=(t=o)=>{if(!i[t])return;const r={welcome:"Welcome to CapeControl! I'm CapeAI, your personal assistant. I'll help you get started with our AI-powered platform. Would you like me to show you around?",profile:"Let's set up your profile first! This helps me provide better, more personalized assistance. What type of business are you running?",features:"Now let me show you our amazing features! We have AI agents for automation, content creation, data analysis, and more. Which area interests you most?",assistant:"Hi there! I'm CapeAI, and I'm here to help you succeed. I can answer questions, provide guidance, and help you make the most of our platform. What would you like to know?",dashboard:"Welcome to your dashboard! This is your command center where you can monitor your AI agents, view analytics, and manage your account. Let me give you a quick tour.",agent:"Ready to launch your first AI agent? I can recommend the best one based on your business needs. What kind of tasks would you like to automate?"};r[t]&&(u("assistant",r[t]),a())},T=()=>{const t=C();t!=null&&t.nextStep&&c(t.nextStep)},D=t=>{i[t]&&(c(t),y(t))},L=()=>{const n={profile:"/profile",features:"/features",dashboard:"/dashboard",agent:"/agents"}[o];n&&s.pathname!==n&&x(n)},O=()=>{c("welcome"),g({profileComplete:!1,featuresViewed:!1,aiIntroduced:!1,dashboardTour:!1,firstAgentLaunched:!1}),j([])};d.useEffect(()=>{S(s.pathname)},[s.pathname]),d.useEffect(()=>{o&&!w.includes(o)&&j(t=>[...t,o])},[o]);const M=()=>o==="complete"||N().percentage===100;return{currentStep:o,currentStepConfig:C(),isComplete:M(),progress:N(),completeStep:k,skipStep:T,goToStep:D,navigateToStepPage:L,resetOnboarding:O,showContextualHelp:y,isStepCompleted:b,triggerStepForRoute:S,showStepDialog:A,setShowStepDialog:I,stepHistory:w,allSteps:i}}function G(){const[s,x]=d.useState(null),[f,l]=d.useState(!0),[g,h]=d.useState(""),{isComplete:u,progress:a}=H();return d.useEffect(()=>{(async()=>{l(!0),h("");try{const c=await Y.get("/api/me");x(c.data)}catch{h("Failed to load user data.")}finally{l(!1)}})()},[]),e.jsxs("div",{className:"max-w-4xl mx-auto mt-20 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Welcome to Your Dashboard"}),!u&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Getting Started"}),e.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[a.percentage,"% Complete"]})]}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Complete your onboarding to unlock the full potential of CapeControl"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white border rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"User Information"}),f&&e.jsx("p",{className:"text-blue-500",children:"Loading..."}),g&&e.jsx("p",{className:"text-red-500",children:g}),s&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Name:"}),e.jsx("span",{className:"text-gray-800",children:s.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-gray-800",children:s.email})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Active"})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-xl shadow p-6 mt-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{className:"bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors",children:"🚀 Launch New Agent"}),e.jsx("button",{className:"bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition-colors",children:"📊 View Analytics"}),e.jsx("button",{className:"bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-colors",children:"⚙️ Manage Settings"}),e.jsx("button",{className:"bg-orange-600 text-white p-4 rounded-lg hover:bg-orange-700 transition-colors",children:"💬 Get Support"})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[!u&&e.jsx(P,{}),e.jsxs("div",{className:"bg-white border rounded-xl shadow p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Account created successfully"]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Dashboard accessed"]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"CapeAI assistant activated"]})]})]})]})]})]})}export{G as default};

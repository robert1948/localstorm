import{r as a,u as L,j as e}from"./index-C-buvYrj.js";function k(s){if(s.length<4)return"weak";let r=0;return s.length>=8&&(r+=1),s.length>=12&&(r+=1),/[a-z]/.test(s)&&(r+=1),/[A-Z]/.test(s)&&(r+=1),/[0-9]/.test(s)&&(r+=1),/[^A-Za-z0-9]/.test(s)&&(r+=1),r<=2?"weak":r<=4?"medium":"strong"}function A({currentStep:s,totalSteps:r}){const d=s/r*100;return e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:`${d}%`}})})}function E(){return e.jsx("div",{className:"text-center mt-6",children:e.jsxs("a",{href:"#",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",onClick:s=>{s.preventDefault(),alert("Support chat would open here. Contact: support@capecontrol.com")},children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Need Help?"]})})}function z({onNext:s,formData:r,setFormData:d}){const[o,x]=a.useState(r.email||""),[l,b]=a.useState(r.password||""),[i,u]=a.useState(""),[h,j]=a.useState(r.firstName||""),[v,w]=a.useState(r.lastName||""),[g,S]=a.useState(r.fullName||""),[p,y]=a.useState(!1),[N,c]=a.useState(!1),[C,P]=a.useState(!1),[F,$]=a.useState(""),[n,f]=a.useState({}),B=()=>{const t={};return g.trim()||(t.name="name is required"),o.trim()?/\S+@\S+\.\S+/.test(o)||(t.email="please enter a valid email"):t.email="email is required",l?l.length<8&&(t.password="password must be at least 8 characters"):t.password="password is required",l!==i&&(t.confirmPassword="passwords do not match"),C||(t.terms="terms acceptance is required"),f(t),Object.keys(t).length===0},I=async t=>{t.preventDefault(),B()&&(f({}),$(""),d({...r,email:o,password:l,firstName:h,lastName:v,fullName:g}),s())};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-8 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600",children:"Step 1: Basic Information"}),e.jsx(A,{currentStep:1,totalSteps:3})]}),F&&e.jsx("p",{className:"text-red-600 text-sm mb-4 text-center bg-red-50 p-3 rounded",children:F}),e.jsxs("form",{onSubmit:I,className:"space-y-4",noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{id:"firstName",type:"text",autoComplete:"given-name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:h,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{id:"lastName",type:"text",autoComplete:"family-name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:v,onChange:t=>w(t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{id:"fullName",type:"text",autoComplete:"name",className:`w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.name?"border-red-500":""}`,value:g,onChange:t=>{const m=t.target.value;S(m);const R=m.split(" ");j(R[0]||""),w(R.slice(1).join(" ")||""),n.name&&f(T=>({...T,name:""}))},placeholder:"Enter your full name"}),n.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",role:"alert",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{id:"email",type:"email",autoComplete:"email",className:`w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.email?"border-red-500":""}`,value:o,onChange:t=>{x(t.target.value),n.email&&f(m=>({...m,email:""}))}}),n.email&&e.jsx("div",{className:"text-red-600 text-sm mt-1",role:"alert",children:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:p?"text":"password",autoComplete:"new-password",className:`w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.password?"border-red-500":""}`,value:l,onChange:t=>{b(t.target.value),n.password&&f(m=>({...m,password:""}))},minLength:8}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!p),"aria-label":p?"Hide password":"Show password",children:p?"👁️":"👁️‍🗨️"})]}),n.password&&e.jsx("div",{className:"text-red-600 text-sm mt-1",role:"alert",children:n.password}),l&&e.jsx("div",{className:"text-sm mt-1",children:e.jsxs("span",{className:`
                ${k(l)==="weak"?"text-red-600":""}
                ${k(l)==="medium"?"text-yellow-600":""}
                ${k(l)==="strong"?"text-green-600":""}
              `,children:["Password strength: ",k(l)]})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:N?"text":"password",autoComplete:"new-password",className:`w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.confirmPassword?"border-red-500":""}`,value:i,onChange:t=>{u(t.target.value),n.confirmPassword&&f(m=>({...m,confirmPassword:""}))}}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!N),"aria-label":N?"Hide password":"Show password",children:N?"👁️":"👁️‍🗨️"})]}),n.confirmPassword&&e.jsx("div",{className:"text-red-600 text-sm mt-1",role:"alert",children:n.confirmPassword})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"termsAccepted",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1",checked:C,onChange:t=>{P(t.target.checked),n.terms&&f(m=>({...m,terms:""}))}}),e.jsxs("label",{htmlFor:"termsAccepted",className:"ml-2 block text-sm text-gray-700",children:["I agree to the"," ",e.jsx("a",{href:"/terms",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]}),n.terms&&e.jsx("div",{className:"text-red-600 text-sm mt-1",role:"alert",children:"You must agree to the terms"}),"        ",e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Create Account"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Continue with Google"}),e.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Continue with GitHub"})]})]}),e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-blue-600 hover:underline",children:"Sign in"})]}),e.jsx(E,{})]})}function H({onNext:s,formData:r,setFormData:d}){const[o,x]=a.useState(r.role||""),l=i=>{x(i),d({...r,role:i})},b=()=>{o&&s()};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-20 p-8 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Choose Your Role"}),e.jsx("p",{className:"text-gray-600",children:"Step 2: Select how you'll use CapeControl"}),e.jsx(A,{currentStep:2,totalSteps:3})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsx("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-all ${o==="user"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>l("user"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"User"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"I want to use AI agents to automate tasks and boost productivity for my business."}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 mt-4 space-y-1",children:[e.jsx("li",{children:"• Access pre-built AI agents"}),e.jsx("li",{children:"• Automate business processes"}),e.jsx("li",{children:"• No coding"}),e.jsx("li",{children:"• Easy-to-use dashboard"})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-all ${o==="developer"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>l("developer"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"})})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Developer"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"I want to create and sell AI agents on the CapeControl marketplace."}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 mt-4 space-y-1",children:[e.jsx("li",{children:"• Build custom AI agents"}),e.jsx("li",{children:"• Sell on the marketplace"}),e.jsx("li",{children:"• Access developer tools"}),e.jsx("li",{children:"• Revenue sharing program"})]})]})})]}),e.jsx("button",{onClick:b,disabled:!o,className:`w-full p-3 rounded-lg font-semibold transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Continue to Details"}),e.jsx(E,{})]})}function O({formData:s,setFormData:r,onSubmit:d}){const[o,x]=a.useState(s.company||""),[l,b]=a.useState(s.phone||""),[i,u]=a.useState(s.website||""),[h,j]=a.useState(s.experience||""),[v,w]=a.useState(!1),[g,S]=a.useState(!1),[p,y]=a.useState(""),N=async c=>{if(c.preventDefault(),!v){y("You must agree to the Terms & Conditions");return}S(!0),y("");const C={...s,company:o,phone:l,website:i,experience:h};try{await d(C)}catch(P){y(P.message)}finally{S(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-8 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Registration"}),e.jsxs("p",{className:"text-gray-600",children:["Step 3: ",s.role==="user"?"Business":"Developer"," Details"]}),e.jsx(A,{currentStep:3,totalSteps:3})]}),p&&e.jsx("p",{className:"text-red-600 text-sm mb-4 text-center bg-red-50 p-3 rounded",children:p}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.role==="user"?"Company Name":"Developer/Company Name"}),e.jsx("input",{type:"text",autoComplete:"username",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:o,onChange:c=>x(c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:l,onChange:c=>b(c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website (Optional)"}),e.jsx("input",{type:"url",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i,onChange:c=>u(c.target.value),placeholder:"https://"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.role==="user"?"Business Experience":"Development Experience"}),e.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:h,onChange:c=>j(c.target.value),children:[e.jsx("option",{value:"",children:"Select experience level"}),e.jsx("option",{value:"beginner",children:"Beginner (0-1 years)"}),e.jsx("option",{value:"intermediate",children:"Intermediate (2-5 years)"}),e.jsx("option",{value:"advanced",children:"Advanced (5+ years)"}),e.jsx("option",{value:"expert",children:"Expert (10+ years)"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"terms",className:"mt-1",checked:v,onChange:c=>w(c.target.checked)}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["I agree to the"," ",e.jsx("a",{href:"/terms",className:"text-blue-600 hover:underline",target:"_blank",children:"Terms & Conditions"})," ","for ",s.role==="user"?"Users":"Developers"]})]}),e.jsx("button",{type:"submit",disabled:g,className:`w-full p-3 rounded-lg font-semibold transition-colors ${g?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:g?"Creating Account...":"Create Account"})]}),e.jsx(E,{})]})}function M(){const[s,r]=a.useState(1),[d,o]=a.useState({}),x=L(),l=()=>{r(s+1)},b=async i=>{try{const u=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!u.ok){const j=await u.json();throw new Error(j.detail||"Registration failed")}const h=await u.json();i.role==="user"?x("/phase2-customer",{state:{userData:{...i,...h}}}):x("/phase2-developer",{state:{userData:{...i,...h}}})}catch(u){throw u}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[s===1&&e.jsx(z,{onNext:l,formData:d,setFormData:o}),s===2&&e.jsx(H,{onNext:l,formData:d,setFormData:o}),s===3&&e.jsx(O,{formData:d,setFormData:o,onSubmit:b})]})}export{M as Register,M as default};

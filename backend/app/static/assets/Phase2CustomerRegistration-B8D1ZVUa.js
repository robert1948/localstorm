import{u as E,b as A,r as c,j as e}from"./index-Be2_x_s4.js";function D({currentStep:l,totalSteps:d}){const t=l/d*100;return e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:`${t}%`}})})}function z(){var x;const l=E(),d=A(),[t,u]=c.useState(1),[m,p]=c.useState(!1),[i,B]=c.useState(((x=d.state)==null?void 0:x.userData)||{}),[a,n]=c.useState({companyName:"",industry:"",companySize:"",businessType:"",useCase:"",budget:"",goals:[],preferredIntegrations:[],timeline:"",experience:""});c.useEffect(()=>{i.email||l("/register")},[i,l]);const g=["Technology","Healthcare","Finance","Retail","Manufacturing","Education","Real Estate","Marketing","Consulting","Other"],h=["Just me (1)","Small team (2-10)","Medium (11-50)","Large (51-200)","Enterprise (200+)"],b=["Startup","SMB","Enterprise","Agency","Freelancer","Non-profit"],f=["Customer Support","Sales Automation","Content Creation","Data Analysis","Process Automation","Lead Generation","Other"],j=["Under $100/month","$100-500/month","$500-2000/month","$2000-5000/month","$5000+/month","Enterprise pricing"],y=["Increase Productivity","Reduce Costs","Improve Customer Experience","Scale Operations","Generate More Leads","Automate Processes","Data-Driven Decisions","Competitive Advantage"],v=["Salesforce","HubSpot","Slack","Microsoft Teams","Google Workspace","Shopify","WordPress","Zapier","API Integration","Custom Integration"],N=s=>{n(r=>({...r,goals:r.goals.includes(s)?r.goals.filter(o=>o!==s):[...r.goals,s]}))},C=s=>{n(r=>({...r,preferredIntegrations:r.preferredIntegrations.includes(s)?r.preferredIntegrations.filter(o=>o!==s):[...r.preferredIntegrations,s]}))},S=()=>{t<3?u(t+1):k()},w=()=>{t>1&&u(t-1)},k=async()=>{p(!0);try{const s={...a,profileCompleted:!0,phase2Completed:!0},r=await fetch("/api/enhanced/complete-phase2-profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.accessToken||""}`},body:JSON.stringify(s)});if(r.ok){const o=await r.json();console.log("Profile completed successfully:",o),l("/login-customer",{state:{message:"Profile completed successfully! Please log in to access your dashboard.",email:i.email}})}else{const o=await r.json();console.error("Profile completion failed:",o),l("/login-customer",{state:{message:"Profile saved locally. Please log in to access your dashboard.",email:i.email}})}}catch(s){console.error("Error completing profile:",s),l("/login-customer",{state:{message:"Please log in to complete your profile setup.",email:i.email}})}finally{p(!1)}},I=()=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Company Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",autoComplete:"username",value:a.companyName,onChange:s=>n({...a,companyName:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Your company or organization name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),e.jsxs("select",{value:a.industry,onChange:s=>n({...a,industry:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select your industry"}),g.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Size"}),e.jsxs("select",{value:a.companySize,onChange:s=>n({...a,companySize:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select company size"}),h.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),e.jsxs("select",{value:a.businessType,onChange:s=>n({...a,businessType:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select business type"}),b.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]}),P=()=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Use Case & Goals"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Use Case"}),e.jsxs("select",{value:a.useCase,onChange:s=>n({...a,useCase:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select your primary use case"}),f.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Business Goals (select all that apply)"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.goals.includes(s),onChange:()=>N(s),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Range"}),e.jsxs("select",{value:a.budget,onChange:s=>n({...a,budget:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select budget range"}),j.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]}),T=()=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Preferences & Timeline"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Preferred Integrations (optional)"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.preferredIntegrations.includes(s),onChange:()=>C(s),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Implementation Timeline"}),e.jsxs("select",{value:a.timeline,onChange:s=>n({...a,timeline:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select timeline"}),e.jsx("option",{value:"immediate",children:"Immediate (within 1 week)"}),e.jsx("option",{value:"month",children:"Within 1 month"}),e.jsx("option",{value:"quarter",children:"Within 3 months"}),e.jsx("option",{value:"planning",children:"Just planning/researching"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI/Automation Experience"}),e.jsxs("select",{value:a.experience,onChange:s=>n({...a,experience:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select experience level"}),e.jsx("option",{value:"beginner",children:"Beginner - New to AI/automation"}),e.jsx("option",{value:"intermediate",children:"Intermediate - Some experience"}),e.jsx("option",{value:"advanced",children:"Advanced - Experienced user"}),e.jsx("option",{value:"expert",children:"Expert - Deep technical knowledge"})]})]})]})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),e.jsx("p",{className:"text-gray-600",children:"Help us customize your CapeControl experience"}),e.jsx(D,{currentStep:t,totalSteps:3})]}),e.jsxs("div",{className:"mb-8",children:[t===1&&I(),t===2&&P(),t===3&&T()]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:w,disabled:t===1,className:`px-6 py-3 rounded-lg font-medium transition-colors ${t===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Back"}),e.jsx("button",{onClick:S,disabled:m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?"Processing...":t===3?"Complete Profile":"Next"})]})]})})})}export{z as default};

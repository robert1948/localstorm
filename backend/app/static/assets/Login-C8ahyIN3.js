import{r,a as k,u as C,j as e,L as h,s as L}from"./index-CytSmYKz.js";import{l as E}from"./auth-D67UQmwn.js";function R(){const[a,g]=r.useState(""),[l,p]=r.useState(""),[w,f]=r.useState(!1),[i,j]=r.useState(!1),[t,o]=r.useState({}),[d,c]=r.useState(!1),[x,u]=r.useState(null),{setUser:y}=k(),v=C(),N=()=>{const s={};return a?/\S+@\S+\.\S+/.test(a)||(s.email="invalid email format"):s.email="email is required",l?l.length<6&&(s.password="Password must be at least 6 characters"):s.password="password is required",o(s),Object.keys(s).length===0},S=async s=>{if(s.preventDefault(),!!N()){o({}),u(null),c(!0);try{const m=await E(a,l);L(m.access_token),y(m.user),v("/dashboard")}catch(m){u(m.message||"Login failed")}finally{c(!1)}}},b=s=>{console.log(`Social login with ${s}`)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center px-4 py-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 sm:p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Login"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your account"})]}),x&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("div",{className:"text-red-800 text-sm font-medium",role:"alert",children:x})}),e.jsxs("form",{onSubmit:S,role:"form","aria-labelledby":"login-heading",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",className:`input-mobile ${t.email?"border-red-500":""}`,type:"email",autoComplete:"username",placeholder:"Enter your email",value:a,onChange:s=>{g(s.target.value),t.email&&o(n=>({...n,email:""}))},"aria-describedby":t.email?"email-error":void 0,disabled:d}),t.email&&e.jsx("div",{id:"email-error",className:"text-red-600 text-sm mt-1",role:"alert",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",className:`input-mobile pr-10 ${t.password?"border-red-500":""}`,type:i?"text":"password",autoComplete:"current-password",placeholder:"Enter your password",value:l,onChange:s=>{p(s.target.value),t.password&&o(n=>({...n,password:""}))},"aria-describedby":t.password?"password-error":void 0,disabled:d}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>j(!i),"aria-label":i?"Hide password":"Show password","data-testid":"password-toggle",tabIndex:-1,children:e.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:i?"�":"👁"})})]}),t.password&&e.jsx("div",{id:"password-error",className:"text-red-600 text-sm mt-1",role:"alert",children:t.password})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:w,onChange:s=>f(s.target.checked)}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e.jsx("button",{className:"btn-mobile-lg w-full bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",type:"submit",disabled:d,children:d?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Logging in..."]}):"Login"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>b("google"),children:"Continue with Google"}),e.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>b("github"),children:"Continue with GitHub"})]})]}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(h,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign up"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(h,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500 transition-colors",children:"Forgot password?"})})]})]})})})}export{R as Login,R as default};
